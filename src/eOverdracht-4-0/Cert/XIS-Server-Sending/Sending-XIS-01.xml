<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../general/schematron/NictizTestScript.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript" nts:scenario="server">
    
    <id value="Sending-xis-1.1-.1"/>
    <version value="stu3-2.0"/>
    <name value="TO DO "/>
    <description value="TO DO"/>
    
    <nts:patientTokenFixture href="eOverdracht-patient-XXX_Altenborg-token.xml"/>
    <nts:fixture id="task-update-fixture" href="resources/resources-specific/eOverdracht-Task-volwassenen-ACCEPTED.xml"/>
    <nts:fixture id="task-update-overdrachtbericht-fixture" href="resources/resources-specific/eOverdracht-Task-volwassenen-ACCEPTED-Overdrachtbericht.xml"/>
    <nts:includeDateT value="yes"/>
    
    <setup>
        <nts:fixture id="task-requested-fixture" href="resources/resources-specific/eOverdracht-Task-volwassenen-REQUESTED.xml" />
        <nts:include value="xis-setup-createTask"/>            
    </setup>
    
    <test id="Scenario1.1-ServeTask">
        <name value="Scenario1.1 - Serve eOverdracht-REQUESTED Task for patient XXX_Altenborg"/>
        <description value="Test XIS server to serve a eOverdracht Task with status 'requested'. This Task is found using a search operation and the XIS server should return a Bundle with a single entry."/>
        <nts:include value="xis-scenario1-serveTask-requested"/>
    </test>
       
    <test id="Scenario1.1-RecieveTaskUpdate">
        <name value="Scenario3.1 - Handle update to QuestionnaireProvisioningTask"/>
        <description value="Test XIS server to handle an update to the QuestionnaireProvisioningTask with status 'accepted'. This will be an update operation where the original Task is sent, with only the status element changed."/>
        <nts:include value="xis-scenario1-receiveTaskUpdate"/>
        <nts:include value="xis-assert-taskAccepted"/>
    </test>
    
    <test id="Scenario1.1-ServeTaskUpdate">
        <name value="Scenario1.1 - Serve eOverdracht-ACCEPTED-Overdrachtsbericht Task for patient XXX_Altenborg"/>
        <description value="Test XIS server to serve a eOverdracht Task with input.Overdrachtbericht. This Task is found using a search operation and the XIS server should return a Bundle with a single entry."/>
        <nts:include value="xis-operation-updateTask-overdrachtbericht"/>
    </test>
    
    </TestScript>
